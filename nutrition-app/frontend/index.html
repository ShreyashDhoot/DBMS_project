<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food &amp; Nutrition Database System</title>
    <link href="style.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="notification" class="notification"></div>

    <nav class="navbar">
        <div class="navbar-brand">üçΩÔ∏è Food &amp; Nutrition DB</div>
        <div class="navbar-menu" id="navbarMenu">
            </div>
    </nav>

    <div id="homeView" class="view active">
        <div class="hero">
            <h1>Food &amp; Nutrition Database System</h1>
            <p>Track your meals, monitor nutrition, and achieve your health goals with our comprehensive Indian food database</p>
            <div class="hero-buttons">
                <button class="btn btn-primary" onclick="showView('register')">Sign Up</button>
                <button class="btn btn-secondary" onclick="showView('login')">Login</button>
            </div>
        </div>

        <div class="container">
            <div class="features">
                <div class="feature-card">
                    <div class="feature-icon">üîç</div>
                    <h3>Search Indian Foods</h3>
                    <p>Browse through 20+ popular Indian dishes with complete nutritional information</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üìù</div>
                    <h3>Log Your Meals</h3>
                    <p>Track breakfast, lunch, dinner, and snacks with customizable portions</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <h3>Track Nutrition</h3>
                    <p>Monitor calories, protein, carbs, fat, and fiber intake daily</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üéØ</div>
                    <h3>Achieve Goals</h3>
                    <p>Set daily calorie targets and track your progress visually</p>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>&copy; 2025 Food &amp; Nutrition Database System | Indian Institute of Technology</p>
            <p style="margin-top: 8px;">Built with HTML, CSS, JavaScript | Database: MySQL (Simulated)</p>
        </div>
    </div>

    <div id="registerView" class="view">
        <div class="container">
            <div class="form-container">
                <h2>Create Account</h2>
                <form id="registerForm" onsubmit="handleRegister(event)">
                    <div class="form-group">
                        <label class="form-label">Username</label>
                        <input type="text" class="form-input" id="regUsername" required minlength="3">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="regEmail" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" id="regPassword" required minlength="8">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Confirm Password</label>
                        <input type="password" class="form-input" id="regConfirmPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Register</button>
                </form>
                <div class="form-link">
                    Already have an account? <a onclick="showView('login')">Login here</a>
                </div>
            </div>
        </div>
    </div>

    <div id="loginView" class="view">
        <div class="container">
            <div class="form-container">
                <h2>Welcome Back</h2>
                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Login</button>
                </form>
                <div class="form-link">
                    Don't have an account? <a onclick="showView('register')">Sign up here</a>
                </div>
            </div>
        </div>
    </div>

    <div id="dashboardView" class="view">
        <div class="container">
            <div class="dashboard-header">
                <div>
                    <h1>Welcome, <span id="userName"></span>! üëã</h1>
                    <div style="display: flex; align-items: center; gap: 12px; margin-top: 8px;">
                        <button class="btn btn-secondary" onclick="navigatePreviousDay()" style="padding: 8px 12px;">‚Üê Previous</button>
                        <p style="color: var(--color-text-secondary); margin: 0;" id="currentDate"></p>
                        <button class="btn btn-secondary" onclick="navigateNextDay()" id="nextDayBtn" style="padding: 8px 12px;">Next ‚Üí</button>
                        <button class="btn btn-primary" onclick="goToToday()" style="padding: 8px 12px;">üìÖ Today</button>
                    </div>
                </div>
                <button class="btn btn-secondary" onclick="handleLogout()">Logout</button>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Calories</div>
                    <div class="stat-value"><span id="totalCalories">0</span> <span class="stat-unit">kcal</span></div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Protein</div>
                    <div class="stat-value"><span id="totalProtein">0</span> <span class="stat-unit">g</span></div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Carbohydrates</div>
                    <div class="stat-value"><span id="totalCarbs">0</span> <span class="stat-unit">g</span></div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Fat</div>
                    <div class="stat-value"><span id="totalFat">0</span> <span class="stat-unit">g</span></div>
                </div>
            </div>

            <div class="section">
                <h3 class="section-title">Daily Calorie Goal</h3>
                <div class="progress-container">
                    <div class="progress-label">
                        <span>Progress</span>
                        <span><span id="calorieProgress">0</span>%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%">
                            <span id="progressText"></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h3 class="section-title">Log a Meal</h3>
                <form onsubmit="handleMealLog(event)">
                    <div class="meal-logger-form">
                        <div class="search-container">
                            <input 
                                type="text" 
                                class="form-input" 
                                id="foodSearch" 
                                placeholder="Search food..." 
                                autocomplete="off"
                                oninput="handleFoodSearch(this.value)"
                            >
                            <div id="searchResults" class="search-results" style="display: none;"></div>
                        </div>
                        <select class="form-input" id="mealType" required>
                            <option value="">Meal Type</option>
                            <option value="breakfast">Breakfast</option>
                            <option value="lunch">Lunch</option>
                            <option value="dinner">Dinner</option>
                            <option value="snacks">Snacks</option>
                        </select>
                        <input 
                            type="number" 
                            class="form-input" 
                            id="quantity" 
                            placeholder="Servings" 
                            min="0.1" 
                            step="0.1" 
                            required
                        >
                        <button type="submit" class="btn btn-primary">Log Meal</button>
                    </div>
                </form>
            </div>

            <div class="section">
                <h3 class="section-title">Today's Meals</h3>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Food</th>
                                <th>Meal Type</th>
                                <th>Servings</th>
                                <th>Calories</th>
                                <th>Protein</th>
                                <th>Carbs</th>
                                <th>Fat</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="mealsTableBody">
                            <tr>
                                <td colspan="9" class="empty-state">No meals logged today. Start tracking your nutrition!</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="section">
                <h3 class="section-title">Calorie Breakdown by Meal Type</h3>
                <div class="chart-container">
                    <div class="bar-chart" id="calorieChart">
                        </div>
                </div>
            </div>
        </div>
    </div>

    <div id="profileSetupView" class="view">
        <div class="container">
            <div class="form-container">
                <h2>Complete Your Profile</h2>
                <p style="text-align: center; color: var(--color-text-secondary); margin-bottom: 24px;">
                    Help us calculate your personalized daily calorie goal
                </p>
                <form id="profileSetupForm" onsubmit="handleProfileSetup(event)">
                    <div class="form-group">
                        <label class="form-label">Gender</label>
                        <select class="form-input" id="profileGender" required>
                            <option value="">Select Gender</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Height (cm)</label>
                        <input type="number" class="form-input" id="profileHeight" required min="100" max="250" step="0.1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Weight (kg)</label>
                        <input type="number" class="form-input" id="profileWeight" required min="30" max="300" step="0.1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Age</label>
                        <input type="number" class="form-input" id="profileAge" required min="10" max="120">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Activity Level</label>
                        <select class="form-input" id="profileActivity" required>
                            <option value="">Select Activity Level</option>
                            <option value="sedentary">Sedentary (little to no exercise)</option>
                            <option value="lightly_active">Lightly Active (1-3 days/week)</option>
                            <option value="moderately_active">Moderately Active (3-5 days/week)</option>
                            <option value="very_active">Very Active (6-7 days/week)</option>
                            <option value="extra_active">Extra Active (very hard exercise)</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Complete Setup</button>
                </form>
            </div>
        </div>
    </div>

    <div id="recipesView" class="view">
        <div class="container">
            <h1 style="margin-bottom: 24px;">üçõ Recipe Recommendations</h1>
            <p style="color: var(--color-text-secondary); margin-bottom: 24px;">
                Tell us what ingredients you have, and we'll suggest healthy Indian dishes for your calorie goal!
            </p>
            
            <div class="section">
                <h3 class="section-title">Available Ingredients</h3>
                <div class="form-group">
                    <input 
                        type="text" 
                        class="form-input" 
                        id="ingredientInput" 
                        placeholder="Enter ingredient (e.g., Rice, Chicken, Tomatoes)"
                    >
                </div>
                <div id="selectedIngredients" class="ingredients-list"></div>
                
                <div style="margin-top: 16px;">
                    <button class="btn btn-primary" onclick="addIngredient()">Add Ingredient</button>
                    <button class="btn btn-secondary" onclick="clearIngredients()" style="margin-left: 12px;">Clear All</button>
                </div>
            </div>

            <div class="section" id="recommendationsSection" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <h3 class="section-title" style="margin: 0;">Recommended Dishes</h3>
                    <button class="btn btn-secondary" onclick="clearIngredients()">üîÑ Refresh & Clear</button>
                </div>
                <div id="recommendationsContainer"></div>
            </div>

            <div class="section" id="generateSection" style="display: none;">
                <button class="btn btn-primary btn-full" onclick="generateRecommendations()">
                    Generate Recipe Recommendations
                </button>
            </div>
        </div>
    </div>

    <div id="profileView" class="view">
        <div class="container">
            <h1 style="margin-bottom: 24px;">‚öôÔ∏è Profile Settings</h1>
            <p style="color: var(--color-text-secondary); margin-bottom: 24px;">
                Update your profile to get personalized calorie recommendations
            </p>
            
            <div class="section">
                <h3 class="section-title">Current Calorie Goal</h3>
                <div style="background: var(--color-primary); color: white; padding: 24px; border-radius: 8px; text-align: center; margin-bottom: 24px;">
                    <div style="font-size: 48px; font-weight: bold;" id="currentCalorieGoal">2000</div>
                    <div style="font-size: 16px; margin-top: 8px;">calories per day</div>
                </div>
            </div>

            <div class="section">
                <h3 class="section-title">Update Your Profile</h3>
                <form id="profileUpdateForm" onsubmit="handleProfileUpdate(event)">
                    <div class="form-group">
                        <label class="form-label">Gender</label>
                        <select class="form-input" id="profileGenderEdit" required>
                            <option value="">Select Gender</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Height (cm)</label>
                        <input type="number" class="form-input" id="profileHeightEdit" required min="100" max="250" step="0.1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Weight (kg)</label>
                        <input type="number" class="form-input" id="profileWeightEdit" required min="30" max="300" step="0.1">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Age</label>
                        <input type="number" class="form-input" id="profileAgeEdit" required min="10" max="120">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Activity Level</label>
                        <select class="form-input" id="profileActivityEdit" required>
                            <option value="">Select Activity Level</option>
                            <option value="sedentary">Sedentary (little to no exercise)</option>
                            <option value="lightly_active">Lightly Active (1-3 days/week)</option>
                            <option value="moderately_active">Moderately Active (3-5 days/week)</option>
                            <option value="very_active">Very Active (6-7 days/week)</option>
                            <option value="extra_active">Extra Active (very hard exercise)</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Update Profile</button>
                </form>
                
                <div style="margin-top: 24px; padding: 16px; background: var(--color-bg-secondary); border-radius: 8px;">
                    <h4 style="margin-bottom: 12px; color: var(--color-primary);">‚ÑπÔ∏è How we calculate your calorie goal</h4>
                    <p style="color: var(--color-text-secondary); font-size: 14px; line-height: 1.6;">
                        We use the Mifflin-St Jeor equation to calculate your Basal Metabolic Rate (BMR), 
                        then multiply it by your activity level to get your Total Daily Energy Expenditure (TDEE). 
                        This is the number of calories you need to maintain your current weight.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div id="searchView" class="view">
        <div class="container">
            <h1 style="margin-bottom: 24px;">Browse Food Database</h1>
            
            <div class="section" style="margin-bottom: 24px;">
                <input 
                    type="text" 
                    class="form-input" 
                    id="foodSearchPage" 
                    placeholder="Search food items..." 
                    oninput="filterFoods()"
                    style="margin-bottom: 16px;"
                >
                
                <div class="filters">
                    <button class="filter-btn active" onclick="filterByRegion('All')">All Regions</button>
                    <button class="filter-btn" onclick="filterByRegion('North')">North Indian</button>
                    <button class="filter-btn" onclick="filterByRegion('South')">South Indian</button>
                    <button class="filter-btn" onclick="filterByRegion('East')">East Indian</button>
                    <button class="filter-btn" onclick="filterByRegion('West')">West Indian</button>
                </div>
            </div>

            <div class="food-grid" id="foodGrid">
                </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>